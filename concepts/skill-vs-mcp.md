# Claude Code: Skill vs MCP 选择指南

> 标签: #claude-code #skill #mcp #架构设计
> 创建时间: 2026-02-23
> 来源: Claude Code 官方文档 + 实践总结

## 概述

Skill 和 MCP 是 Claude Code 的两种扩展机制，选择标准是：**需要外部资源连接用 MCP，纯任务流程用 Skill**。

## 本质区别

| 特性 | **MCP (Model Context Protocol)** | **Skill** |
|------|---------|---------|
| 定位 | **协议/连接器** | **任务模板** |
| 职责 | 接入外部资源 | 执行预定义流程 |
| 运行方式 | 服务端运行，持久化 | 即时加载，执行完释放 |
| 状态管理 | 有状态（连接池、会话） | 无状态 |

## "有状态 vs 无状态" 详解

### MCP 是"有状态"的

```
MCP Server ←保持连接→ 外部资源
     ↑
   可维护：连接池、会话、缓存、长连接
```

**典型场景**：
- 数据库连接池 (PostgreSQL, MySQL)
- Puppeteer 浏览器 session
- WebSocket 长连接
- 需要认证的 API 会话

### Skill 是"无状态"的

```
Skill = 预定义的 Prompt + 上下文
      ↓
    执行完即释放，不保留运行时状态
```

**典型场景**：
- `/commit` - Git 提交流程
- `/review` - 代码审查模板
- 报告生成
- 格式化输出

## 选择标准

| 场景 | 选择 | 原因 |
|------|------|------|
| 访问数据库 | ✅ MCP | 需要连接池、事务管理 |
| 调用外部 API | ✅ MCP | 可能需要认证、会话保持 |
| 操作浏览器 | ✅ MCP | Puppeteer 需要维护 session |
| 标准化工作流 | ✅ Skill | 纯 prompt 组合，无需外部资源 |
| 格式化输出 | ✅ Skill | 文本处理，执行完即释放 |
| 批量模板任务 | ✅ Skill | 无需维护状态 |

## 最佳实践：组合使用

```
用户 → Skill(业务逻辑) → MCP(数据获取) → 外部资源
```

**示例**：数据分析报告
1. **Skill** 定义报告格式和业务逻辑
2. **MCP** 连接数据库获取数据
3. Skill 整合数据生成报告

## 简单判断口诀

```
需要连接外部系统？ → 用 MCP
需要执行标准化任务？ → 用 Skill
两者都需要？ → Skills + MCP 组合
```

## 相关知识点

- [[Claude Code 使用指南]]
- [[MCP 服务器配置]]

---
*采集自 Claude Code 对话*
